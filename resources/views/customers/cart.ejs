<section class="cart py-5 md:py-16">

  <% if(session.cart) {%>

  <div class="order container mx-auto xl:w-1/2 text-gray-800">

    <div class="flex items-center border-b border-gray-300 pb-4">
      <img src="/img/cart-black.png" alt="cart-icon">
      <h1 class="font-bold ml-4 text-2xl">Order Summary</h1>
    </div>

    <div class="pizza-list">

      <% for(let item of Object.values(session.cart.items)) {%>

      <div class="flex flex-col sm:flex-row items-center my-4 rounded-xl shadow-md bg-white py-4 px-8">
        <img class="w-24" src="/img/<%= item.item.image %>" alt="">
        <div class="flex-1 text-center mt-3 md:ml-4 md:text-left">
          <h1 class="font-bold text-lg md:text-md"><%= item.item.name %></h1>
          <span class="uppercase py-1 px-2 mt-4 rounded-full text-xs text-white
          <% if(item.item.category === 'veg') {%>
            bg-green-500
          <% } else if(item.item.category === 'non-veg') {%>
            bg-red-500
          <% } else if(item.item.category === 'dessert'){%>
            bg-yellow-500
          <% }%>
          "><%= item.item.category %></span>
        </div>
        <span class="flex-1 my-2 mt-7 md:mt-0 md:my-0">
          <button data-item="<%= JSON.stringify(item.item) %>" class="remove-from-cart btn-primary text-sm sm:text-md px-4 py-1 sm:ml-10 md:ml-0 rounded-full text-white font-bold">Remove</button>
        </span>
        <span class="font-bold text-lg">₹<%= item.item.price %></span>
      </div>

      <%}%>

    </div>
    <hr>
    <div class="text-right py-4">
      <div class="">
        <span class="amount text-2xl font-bold ml-2">₹<%= session.cart.totalPrice %></span>
        <span class="text-lg font-bold"><em>/Plate</em></span>
      </div>

      <% if(user) {%>
      <div class="">
        <form action="/orders" method="POST" class="mt-12">
          <% if (messages.error) { %>
            <span class="block text-red-500 text-sm mb-1"><%= messages.error %></span>
          <% }%>
          <input class="border border-gray-400 p-2 w-full md:w-1/2 mb-4 rounded" type="text" placeholder="Phone Number" name="phone">
          <textarea name="address" class="border border-gray-400 p-2 w-full md:w-1/2 rounded" placeholder="Address"></textarea>
          <div class="">
            <button type="submit" name="button" class="btn-primary px-6 py-2 rounded-full text-white font-bold mt-6">Order Now</button>
          </div>
        </form>
      </div>
      <% } else {%>
      <a href="/login" class="inline-block cursor-pointer btn-primary px-6 py-2 rounded-full text-white font-bold mt-6">Login to continue</a>
      <%}%>

    </div>
  </div>

  <%} else {%>

  <div class="empty-cart py-16 text-gray-800">
    <div class="container mx-auto text-center">
      <i class="las la-shopping-cart text-6xl"></i>
      <h1 class="text-3xl font-bold mb-2">Your Cart is Empty</h1>
      <p class="text-gray-500 text-lg mb-12">You Probably Haven't Added Anything To Cart.<br> To order now, go to the main page.
      </p>
      <img class="w-2/5 mx-auto" src="/img/empty-cart.png" alt="empty-cart-image">
      <a href="/" class="inline-block px-6 py-2 rounded-full btn-primary text-white font-bold mt-12">Go Back</a>
    </div>
  </div>

  <%}%>

</section>
